# 알아놓으면 좋은 PHP 함수들

 이번 강좌에선 알아두면 좋은 PHP 함수 및
 응용방법에 대해서 강좌해봅니다.
 > 참고 : '//'는 [주석](7.md)입니다.

### ```isset``` / ```unset``` / ```empty``` / ```is_null``` / ```is_numeric```

```php
isset($var) // 해당변수가 선언되있는지 유무를 반환합니다 (true false)
unset($var) // 해당변수가 참조하는 객체를 메모리에서 삭제합니다.
```

 ```empty($var)``` 해당 변수가 비었는지 유무를 반환합니다. (true false)
 ```is_null($var)``` 해당 변수가 null 값인지 유무를 반환합니다. ```(true false)```
 ```is_numeric($var)``` 해당변수가 숫자형인지 유무를 반환합니다. ```(true false)```

 ### ```empty``` 와 ```is_nulll``` 비교

|값|```if($var)```|```isset```|```empty```|```is_null``|
|:-:|:-:|:-:|:-:|:-:|:-:|
|```$var1 =1```|TRUE|TRUE|FALSE|FALSE|
|```$var="";```|FALSE|TRUE|TRUE|FALSE|
|```$var="0";```|FALSE|TRUE|TRUE|FALSE|
|```$var=0;```|FALSE|TRUE|TRUE|FALSE|
|```$var=NULL```|FALSE|FALSE|TRUE|TRUE|
|```$var```|FALSE|FALSE|TRUE|TRUE|
|```$var=array()```|FALSE|TRUE|TRUE|FALSE|
|```$var=array(1)```|TRUE|TRUE|FALSE|FALSE|

## explode / implode

```php
 explode("찾을문자열", "나눌문자열") // 문자열을 특정 문자열로 구분해서 배열로 나눕니다.
implode("찾을문자열", 배열) // 문자열을 특정 문자열로 구분해서 문자열로 합칩니다.
```
 ※ 응용해서 x좌표:y좌표:z좌표 처럼 뭉쳐서 저장/사용 등이 가능합니다.)<br>
 ※ 키 인덱스는 ```[0]``` ```[1]``` ```[2]```순으로 저장되어집니다.

## ```strtolower``` / ```strtoupper``` / ```mb_substr``` / ```mb_strlen```
```php
strtolower("문자열"); // 문자열을 모두 소문자로 만듭니다.
strtoupper("문자열"); // 문자열을 모두 대문자로 만듭니다.
mb_substr(문자열, 시작위치, 길이, 인코딩); // 문자열을 자릅니다.
mb_strlen ( 문자열, 인코딩); // 문자열의 길이를 반환합니다.
```
 (※인코딩은 생략해도 되며 "UTF-8" 을 적으면 통상적으로 적용됩니다.)

## ```trim``` / ```ltrim``` / ```rtrim```
```php
ltrim(문자열)//좌측에 공백이 있으면 제거
rtrim(문자열)//우측에 공백이 있으면 공백제거
trim(문자열)//좌우의 공백을 제거
trim("삭제하려는내용", "문자열") //해당내용이 있으면 삭제
ltrim("삭제하려는내용", "문자열") //좌측에 해당내용이 있으면 삭제
rtrim("삭제하려는내용", "문자열") //우측에 해당내용이 있으면 삭제
```
## ```array_*```
```php
array_sum($array) //배열의 값을 모두 더해서 리턴
array_push(넣어야하는것, $array) //배열 순서 마지막에 값을 넣고 배열크기 리턴
array_pop($array) //배열의 마지막 순서 값을 삭제하고 해당 값 리턴
array_shift($array) //배열의 맨앞의 값을 삭제하고 해당값 리턴
array_unshift(넣어야하는것, $array) //배열의 맨앞에 값을 넣고 배열크기 리턴
array_reverse($array) //해당 배열을 뒤집음
array_unique($array) // 배열에 존재하는 같은 값이 없도록 중복을 제거 후 제거한 배열을 리턴
array_key_exists("확인하고자 하는 키", [배열명]);
in_array("확인하고자 하는 값", [배열명]);
array_fill(시작번호, 채울 항목수, 값) // 해당 값으로 채워진 배열을 생성후 리턴
$arr = array_fill_keys(array("key1", "key2", "key3"), 채울값); //해당 키를 생성후 해당 값으로 채움
array_keys($array) //배열의 키들을 리턴해옴
array_values($array) //배열의 값들을 리턴해옴
array_merge(A, B) //A 배열과 B 배열을 합쳐줌
count(배열); // 배열의 크기를 반환합니다.
```

## 배열정렬
```php
shuffle(배열) // 해당 배열을 완전히 뒤섞음
sort(배열) // 값을 기준으로 오름차순 정렬
rsort(배열) //값을 기준으로 내림차순 정렬
ksort(배열) // 키를 기준으로 오름차순 정렬
krsort(배열) // 키를 기준으로 내림차순 정렬
asort(배열) // 배열의 키와 값은 건들지 않고 키순서를 오름차순 정렬
arsort(배열) // 배열의 키와 값은 건들지 않고 키순서를 내림차순 정렬
```

## ```compact``` / ```extract``` / ```list```
```php
배열 = compact(변수, 변수....) //변수이름을 키로 변수값을 값으로 이용해 배열로 만들어줌
extract(배열) // 배열키를 변수이름로 배열값을 변수값으로 이용해 변수로 만들어줌
list(변수1, 변수2, 변수3) = array("1", "2", "3"); //배열 값을 변수로 뽑아냄
```
## ```max``` / ```min```
```php
max(숫자배열); // 가장 큰 값 리턴
min(숫자배열); // 가장 작은값 리턴
```

## ```vjson_encode``` / ```json_decode```
```php
json형태문자열반환 = json_encode(객체); //배열-문자열등을 json형식의 '문자열'로 변환합니다.
객체 = json_decode(json형태문자열); // json형식의 문자열을 배열/문자열등으로 복구합니다.
```
 ※저장 혹은 통신용으로 보편적으로 쓰이는 함수입니다.


 ## ```var_dump```
```php
var_dump(객체);
```
 해당 객체에 대한 정보를 출력합니다.
 ※디버깅용으로 유용합니다.

## 진수변환
```php
base_convert(숫자, 현재진수, 변환할진수) //원하는진수로 반환
decbin(10진수) //10진수를 2진수로 반환
bindec(2진수) //2진수를 10진수로 반환
decoct(10진수) //10진시를 8진수로 반환
octdec(8진수) //8진수를 10진수로 반환
dechex(10진수) //10진수를 16진수로 반환
hexdec(16진수) //16진수를 10진수로 반환
```

## ```ceil``` / ```floor``` / ```round``` / ```abs```
```php
ceil(숫자) //올림 반환
floor(숫자) //내림 반환
round(숫자) //반올림 반환
abs(숫자) //절대값 반환
```
## 난수 생성
```php
 mt_rand(최하값, 최대값); //난수
```
 해당범위의 난수를 반환합니다. (※유용)

## 지연
```php
 sleep(초); 초만큼 지연시킵니다
 usleep(마이크로초); 마이크로초만큼 지연
```
 쓰면 해당 초만큼 서버가 지연됩니다.
 ※서버 구동이후엔 쓰지마세요, 1초이상 멈추면
 해당서버에 접속해있는 사람들 싹 다 튕깁니다.
 ※서버 사전세팅 혹은 비동기 등에서나 쓰길 권장, 알아만두세요.

## ```gethostbyname``` / ```eval```
```php
 gethostbyname(도메인) //도메인으로 아이피얻기
 eval(문자열) //PHP코드를 문자열로 전달받으면, 해당 코드를 실행시킵니다.
```
 ※```eval``` 함수 쓰면 THAAD 플러그인에서 확인시 주의띄웁니다.

## 날짜

### 문자열반환 = ```date(날짜표현);```
 ex. ```date("Y-m-D");```

 날짜 및 시분초를 얻어오는 유용한 함수입니다.

 #### 포멧으로 사용가능한 문자들

|포멧문자|설명|
|:----:|:--:|
|```d```|1글자인 경우 앞에 0이 붙는 일|
|```D```|영문 3글자로 표시하는 요일|
|```j```|앞에 ```0```이 붙지 않는 요일|
|```I```|영문으로 표시하는 요일|
|```w```|요일 숫자값으로 월요일(```1```) ~ 일요일(```7```)|
|```z```|올해 몇번째 날짜인지 표시 (```0```부터 시작)|
|```W```|올해 몇번째 주인지 표시|
|```F```|영문으로 표시하는 월|
|```m```|1글자인 경우 앞에 0이 붙는 월|
|```M```|영문 3글자로 표시하는 월|
|```n```|앞에 0이 붙지 않는 월|
|```t```|해당 월의 마지막 날|
|```L```|윤년인 경우 1윤년이 아닌경우 ```0```을 리턴|
|```Y```|연도를 4글자로 표현|
|```y```|연도를 2글자로 표현|
|```a```|오전인 경우 ```am```을 오후인 경우 ```pm```을 리턴|
|```A```|오전인 경우 ```AM```을 오후인 경우 ```PM```을 리턴|
|```g```|시간을 ```1```에서 ```12```까지로 표현|
|```G```|시간을 ```0```에서 ```23```까지로 표현|
|```h```|시간을 ```01``에서 ```12``까지로 표현|
|```H```|시간을 ```0```에서 ```23```까지로 표현|
|```i```|```분을 ```00``에서 59```까지로 표현|
|```s```|```초를 ```00``에서 ```59```까지로 표현|

## 타임스탬프 만들기(※완전쉬운 초단위 비교!)

```php
 function makeTimestamp() {
  $date = date( "Y-m-d H:i:s" );
  $yy = substr( $date, 0, 4 );
  $mm = substr( $date, 5, 2 );
  $dd = substr( $date, 8, 2 );
  $hh = substr( $date, 11, 2 );
  $ii = substr( $date, 14, 2 );
  $ss = substr( $date, 17, 2 );
  return mktim( $hh, $ii, $ss, $mm, $dd, $yy );
 }
```
 해당함수는 공식함수는 아닙니다.<br>
 해당 함수를 쓰면 초단위의 타임스탬프를 만들어줍니다.

### 응용방법
```php
 $a = makeTimestamp();
 sleep(3);
 $b = makeTimestamp();
 echo $b - $a . "second!";
```
 이렇게 하면 3초차이라는 것을 확인하실 수 있습니다.
 확인해보시면 그냥 숫자덩어리이므로, ```yml```, ```json```으로 저장도 가능합니다.


 (※ 분명 누군가 시간초 처리에 헤멜걸 알기에
 공식 함수는 아니지만 명시해놓습니다.)

 microtime을 통한 마이크로초단위 비교방법
```php
 function _microtime ( ) { return array_sum(explode(' ',microtime())); }
 $time_start=_microtime();
 usleep(1000000);
 echo (_microtime() - $time_start);
```
 ※마이크로초단위에만 사용해주세요.<br>
 ※초단위를 넘어가는 시점에서 부적합 합니다.<br>
 ※어느 함수가 실행 되는데 몇밀리초 걸리는지, 이런거 벤치마킹할때 유용<br>

## 이외에 더 다양한 함수들 정보

 * http://kr.php.net/manual/kr/
 * http://google.com

 ※[구글링](google.com)을 적극활용하세요, 두드리면 열립니다.
